/**
  This file contains an 'Intel Peripheral Driver' and uniquely
  identified as "Intel Reference Module" and is
  licensed for Intel CPUs and chipsets under the terms of your
  license agreement with Intel or your vendor.  This file may
  be modified by the user, subject to additional terms of the
  license agreement
**/
/**

Copyright (c) 2012 - 2013 Intel Corporation. All rights reserved
This software and associated documentation (if any) is furnished
under a license and may only be used or copied in accordance
with the terms of the license. Except as permitted by such
license, no part of this software or documentation may be
reproduced, stored in a retrieval system, or transmitted in any
form or by any means without the express written consent of
Intel Corporation.

  @file
  PchEarlyInitPeim.c

  @brief
  The VLV Init PEIM implements the VLV PEI early(before MRC) Init PPI.

**/
#include "PchEarlyInitPeim.h"


#define PCIE_MODPHY_4377025_4377028_WORKAROUND  1
#define PCIE_MODPHY_4377026_WORKAROUND          1
#define PCIE_MODPHY_4376932_WORKAROUND          1
#define PCIE_MODPHY_4682196_4682348             1
#define PCIE_MODPHY_4682442_WORKAROUND          1

#define USB2_MODPHY_4376904_WORKAROUND          1

#define SATA_MODPHY_4681607_WORKAROUND          0


PCH_MSG_BUS_TABLE_STRUCT_TABLE_STRUCT PchMphyPLLConfBeforePCIEResetRel[] = {
  ///
  /// modesel[2:0] = 0x5
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8014, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_avg[1:0][1:0] = 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_maxstep[4:0] = 0x10
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_integ[3:0]= 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlockthresh= 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x801C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// irefperrcen= 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8040, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 29), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
};



PCH_MSG_BUS_TABLE_STRUCT_TABLE_STRUCT PchMphyRequirements_B0[] = {
  ///
  /// PCIe & GbE PHY
  /// TL driver (Strength Setting)
  /// idtcmlloadsel_right_h_3_0 = 0xE
  /// idtcmlsthsel_right_h_3_0 = 0xB
  /// idtcmlloadsel_left_h_3_0 = 0xE
  /// idtcmlsthsel_left_h_3_0 = 0xB
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x804C, (UINT32) (0x0000FFFF), (UINT32) (0xEBEB << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x806C, (UINT32) (0x0000FFFF), (UINT32) (0xEBEB << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x80EC, (UINT32) (0x0000FFFF), (UINT32) (0xEBEB << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },


  ///
  /// SATA PHY
  /// Enable COM Mode
  /// cri_kalignmode_1_0 = 0x2
  ///
  { PCH_SATA_PHY_PORT_ID, 0x2208, (UINT32)~(0x0000000C), (UINT32) (0x0002 << 2), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2408, (UINT32)~(0x0000000C), (UINT32) (0x0002 << 2), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// SATA PHY
  /// # of COMs detect
  /// cri_kalign_com_cnt = 0x6
  ///
  { PCH_SATA_PHY_PORT_ID, 0x2238, (UINT32)~(0x00000007), (UINT32) (0x0006 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2438, (UINT32)~(0x00000007), (UINT32) (0x0006 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// SATA PHY
  /// PLL Divider Setting
  /// idtclkm2div_7_0 = 0x1E
  ///
  { PCH_SATA_PHY_PORT_ID, 0x800C, (UINT32)~(0x000000FF), (UINT32) (0x001E << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x802C, (UINT32)~(0x000000FF), (UINT32) (0x001E << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x808C, (UINT32)~(0x000000FF), (UINT32) (0x001E << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// SATA PHY
  /// TL driver (Strength Setting)
  /// idtcmlloadsel_right_h_3_0 = 0x2
  /// idtcmlsthsel_right_h_3_0 = 0x2
  /// idtcmlloadsel_left_h_3_0 = 0x2
  /// idtcmlsthsel_left_h_3_0 = 0x2
  ///
  { PCH_SATA_PHY_PORT_ID, 0x804C, (UINT32)~(0xFFFF0000), (UINT32) (0x2222 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x806C, (UINT32)~(0xFFFF0000), (UINT32) (0x2222 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80EC, (UINT32)~(0xFFFF0000), (UINT32) (0x2222 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// SATA PHY
  /// PLL1 TL driver (Right Control)
  /// bufrightena1 = 0x0
  ///
  { PCH_SATA_PHY_PORT_ID, 0x810C, (UINT32)~(0xC0000000), (UINT32) (0x0000 << 30), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
#if PCIE_MODPHY_4377025_4377028_WORKAROUND
  ///
  /// Workaround for sighting #4377025 and #4377028
  ///
  ///
  /// Offset 0x80A4, Data = 0x00730000
  ///
#ifndef PCIE_MODPHY_4682196_4682348
  { PCH_PCIE_PHY_PORT_ID, 0x80A4, (UINT32) (0x00000000), (UINT32) (0x00730000 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif
  ///
  /// PLL_EXT.irefrcoffset[7:0] = 0x50
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80E0, (UINT32) (0xFFFF00FF), (UINT32) (0x50 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCS.txrcscale[7:0] = 0x80
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0xFFFF00FF), (UINT32) (0x80 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0xFFFF00FF), (UINT32) (0x80 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0xFFFF00FF), (UINT32) (0x80 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0xFFFF00FF), (UINT32) (0x80 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2254, (UINT32) (0xFFFF00FF), (UINT32) (0x80 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// grcnow 0x1
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80C0, (UINT32) (0xFFFFDFFF), (UINT32) (0x1 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1/2
  /// ouniqtranscale[7:0] = 0x98
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0xFFFF00FF), (UINT32) (0x98 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0xFFFF00FF), (UINT32) (0x98 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0xFFFF00FF), (UINT32) (0x98 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0xFFFF00FF), (UINT32) (0x98 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1/2
  /// ouniqetrangenmethod[1:0] = 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1/2
  /// oscaledcompmethod[1:0] = 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1/2
  /// omargin000[7:0] = 0x80
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0xFF00FFFF), (UINT32) (0x80 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0xFF00FFFF), (UINT32) (0x80 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0xFF00FFFF), (UINT32) (0x80 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0xFF00FFFF), (UINT32) (0x80 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1/2
  /// reg_txdeemp[1:0] = 0x1
  ///
#ifndef PCIE_MODPHY_4682196_4682348
  { PCH_PCIE_PHY_PORT_ID, 0x0224, (UINT32) (0xFFFF9FFF), (UINT32) (0x01 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0424, (UINT32) (0xFFFF9FFF), (UINT32) (0x01 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0624, (UINT32) (0xFFFF9FFF), (UINT32) (0x01 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0824, (UINT32) (0xFFFF9FFF), (UINT32) (0x01 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ow2tapgen2deemph3p5[7:0]= 0x49 #3.5dB
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFFFF00FF), (UINT32) (0x49 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFFFF00FF), (UINT32) (0x49 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFFFF00FF), (UINT32) (0x49 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFFFF00FF), (UINT32) (0x49 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ow2tapdeemph6p0[7:0] = 0x30 #6.0dB
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFF00FFFF), (UINT32) (0x30 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFF00FFFF), (UINT32) (0x30 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFF00FFFF), (UINT32) (0x30 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFF00FFFF), (UINT32) (0x30 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1
  /// ow2tapgen1deemph3p5[7:0] = 0x4d #3.5dB
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFFFFFF00), (UINT32) (0x4D << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFFFFFF00), (UINT32) (0x4D << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFFFFFF00), (UINT32) (0x4D << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFFFFFF00), (UINT32) (0x4D << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif //PCIE_MODPHY_4682196_4682348
  ///
  /// PCIE Gen1
  /// ouniqtranscale[7:0] = 0xC0
  /// SC dungeon found these are not good settings do not apply if those are in place
  ///
#ifndef PCIE_MODPHY_4682196_4682348
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif //PCIE_MODPHY_4682196_4682348
  ///
  /// PCIE Gen1
  /// oscaledcompmethod[1:0] = 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xF3FFFFFF), (UINT32) (0x0 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xF3FFFFFF), (UINT32) (0x0 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xF3FFFFFF), (UINT32) (0x0 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xF3FFFFFF), (UINT32) (0x0 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1
  /// ouniqetrangenmethod[1:0] = 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xCFFFFFFF), (UINT32) (0x3 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xCFFFFFFF), (UINT32) (0x3 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xCFFFFFFF), (UINT32) (0x3 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xCFFFFFFF), (UINT32) (0x3 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen1
  /// ocalcinit = 0x0
  /// ocalcinit = 0x1
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0294, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0294, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0494, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0494, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0694, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0694, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0894, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0894, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ouniqtranscale[7:0] = 0xC0
  /// SC dungeon found these were not good settings do not apply
  ///
#ifndef PCIE_MODPHY_4682196_4682348
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif //PCIE_MODPHY_4682196_4682348
  ///
  /// PCIE Gen2
  /// ouniqetrangenmethod[1:0] = 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xCFFFFFFF), (UINT32) (0x0 << 28), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// oscaledcompmethod[1:0] = 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xF3FFFFFF), (UINT32) (0x3 << 26), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// omargin010[7:0] = 0x55
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0x00FFFFFF), (UINT32) (0x55 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0x00FFFFFF), (UINT32) (0x55 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0x00FFFFFF), (UINT32) (0x55 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0x00FFFFFF), (UINT32) (0x55 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// omargin011[7:0] = 0x46
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xFFFFFF00), (UINT32) (0x46 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xFFFFFF00), (UINT32) (0x46 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xFFFFFF00), (UINT32) (0x46 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xFFFFFF00), (UINT32) (0x46 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// omargin100[7:0] = 0x20
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xFFFF00FF), (UINT32) (0x20 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xFFFF00FF), (UINT32) (0x20 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xFFFF00FF), (UINT32) (0x20 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xFFFF00FF), (UINT32) (0x20 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// omargin101[7:0] = 0x78
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x028C, (UINT32) (0xFF00FFFF), (UINT32) (0x78 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x048C, (UINT32) (0xFF00FFFF), (UINT32) (0x78 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x068C, (UINT32) (0xFF00FFFF), (UINT32) (0x78 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x088C, (UINT32) (0xFF00FFFF), (UINT32) (0x78 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ow2tapgen1deemph3p5[7:0] = 0xC0
  /// SC dungeon found this is not good settings do not apply
  ///
#ifndef PCIE_MODPHY_4682196_4682348
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFFFFFF00), (UINT32) (0xC0 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFFFFFF00), (UINT32) (0xC0 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFFFFFF00), (UINT32) (0xC0 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFFFFFF00), (UINT32) (0xC0 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ow2tapgen2deemph3p5[7:0]= 0xC0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFFFF00FF), (UINT32) (0xC0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ow2tapdeemph6p0[7:0] = 0xC0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFF00FFFF), (UINT32) (0xC0 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFF00FFFF), (UINT32) (0xC0 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFF00FFFF), (UINT32) (0xC0 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFF00FFFF), (UINT32) (0xC0 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif //PCIE_MODPHY_4682196_4682348
  ///
  /// PCIE Gen2
  /// ow2tapdeemph9p5[7:0] = 0xC0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0x00FFFFFF), (UINT32) (0xC0 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0x00FFFFFF), (UINT32) (0xC0 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0x00FFFFFF), (UINT32) (0xC0 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0x00FFFFFF), (UINT32) (0xC0 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCIE Gen2
  /// ocalcinit = 0x0
  /// ocalcinit = 0x1
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0294, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0294, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0494, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0494, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0694, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0694, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0894, (UINT32) (0x7FFFFFFF), (UINT32) (0x00 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0894, (UINT32) (0x7FFFFFFF), (UINT32) (0x01 << 31), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif

#if PCIE_MODPHY_4682442_WORKAROUND
  // Si HSD 4682442: BIOS is not setting some PCIe mphy registers properly in order to enable ASPM L0s
  // vlv.pcie.mphy.ref.compen5.mxselsqvrefhi_3_0=8
  // vlv.pcie.mphy.ref.compen5.mxselsqvreflo_3_0=7
  // vlv.pcie.mphy.ref.compen6.mxselsqofsvrefhi_3_0=0xf
  // vlv.pcie.mphy.ref.compen6.mxselsqofsvreflo_3_0=0x4
  { PCH_PCIE_PHY_PORT_ID, 0x80A4, (UINT32) (0xFFFF0000), (UINT32) (0xF487 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif


#if PCIE_MODPHY_4376932_WORKAROUND
  ///
  /// Workaround for sighting #4376932
  ///
  ///
  /// PCIe PHY
  /// Squelch Current Settings
  /// ocfgsqcmlcurrentadj_2_0 = 0x7
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0314, (UINT32) (0xFFFFFFF8), (UINT32) (0x07 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0514, (UINT32) (0xFFFFFFF8), (UINT32) (0x07 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0714, (UINT32) (0xFFFFFFF8), (UINT32) (0x07 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0914, (UINT32) (0xFFFFFFF8), (UINT32) (0x07 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2314, (UINT32) (0xFFFFFFF8), (UINT32) (0x07 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
#endif

#if PCIE_MODPHY_4376932_WORKAROUND

  //
  // SATA PHY
  // Squelch Current Settings
  // ocfgsqcmlcurrentadj_2_0 = 0x7
  //
  { PCH_SATA_PHY_PORT_ID, 0x2314, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2514, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
#endif



#if SATA_MODPHY_4681607_WORKAROUND
  // Si HSD 4681607: Jitter spike seen in PLL hybrid mode on slow silicon
  // https://vthsd.an.intel.com/hsd/valleyview/default.aspx#sighting/default.aspx?sighting_id=4681607
  // ModPHY settings update for SATA

  // idtpllmodesel[2:0]=0x5
  { PCH_SATA_PHY_PORT_ID, 0x8014, (~(((UINT32) 0x07) << 24)), (((UINT32) 0x05) << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8034, (~(((UINT32) 0x07) << 24)), (((UINT32) 0x05) << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8094, (~(((UINT32) 0x07) << 24)), (((UINT32) 0x05) << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  // idtlpf_integ[3:0]=0x2 & idtlpf_coeff[3:0]=0xA
  { PCH_SATA_PHY_PORT_ID, 0x8048, (~((UINT32) 0xFF)), ((UINT32) 0x2A), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8068, (~((UINT32) 0xFF)), ((UINT32) 0x2A), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80E8, (~((UINT32) 0xFF)), ((UINT32) 0x2A), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  // idtlockthresh[1:0]=0x3
  { PCH_SATA_PHY_PORT_ID, 0x801C, (~(((UINT32) 0x03) << 22)), (((UINT32) 0x03) << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x803C, (~(((UINT32) 0x03) << 22)), (((UINT32) 0x03) << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x809C, (~(((UINT32) 0x03) << 22)), (((UINT32) 0x03) << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
#endif


#ifdef PCIE_MODPHY_4682196_4682348
  ///
  /// modesel[2:0] = 0x5
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x8094, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x8034, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x8014, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// modesel[2:0] = 0x5
  ///
  { PCH_SATA_PHY_PORT_ID, 0x8094, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8034, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8014, (UINT32) (0xF8FFFFFF), (UINT32) (0x5 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_avg[1:0][1:0] = 0x3
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80e8, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x8068, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_avg[1:0][1:0] = 0x3
  ///
  { PCH_SATA_PHY_PORT_ID, 0x80e8, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8068, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8048, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_maxstep[4:0] = 0x10
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80e8, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x8068, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_maxstep[4:0] = 0x10
  ///
  { PCH_SATA_PHY_PORT_ID, 0x80e8, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8068, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8048, (UINT32) (0xFFE0FFFF), (UINT32) (0x10 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_integ[3:0]= 0x0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80e8, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x8068, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x8048, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlpf_integ[3:0]= 0x0
  ///
  { PCH_SATA_PHY_PORT_ID, 0x80e8, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8068, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8048, (UINT32) (0xFFFFFF0F), (UINT32) (0x0 << 4), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlockthresh= 0x3
  ///
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x801C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x803C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x809C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtlockthresh= 0x3
  ///
  { PCH_SATA_PHY_PORT_ID, 0x801C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x803C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x809C, (UINT32) (0xFF3FFFFF), (UINT32) (0x3 << 22), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// irefperrcen= 0x0
  ///
  //Moved this MODPHY setting before BIOS handshake with PMC
  //{ PCH_PCIE_PHY_PORT_ID, 0x8040, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 29), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x8060, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 29), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x80e0, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 29), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// irefperrcen= 0x0
  ///
  { PCH_SATA_PHY_PORT_ID, 0x8040, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 28), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x8060, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 28), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80e0, (UINT32) (0xEFFFFFFF), (UINT32) (0x0 << 28), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// fst_plllocktimer= 0x3
  ///
  { PCH_SATA_PHY_PORT_ID, 0x8100, (UINT32) (0xFFFFFFFC), (UINT32) (0x3 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  ///
  /// idtcmlloadsel_left_h[3:0]= 0x43
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x804C, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x806C, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x80EC, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtcmlloadsel_left_h[3:0]= 0x43
  ///
  { PCH_SATA_PHY_PORT_ID, 0x804C, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x806C, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80EC, (UINT32) (0x00FFFFFF), (UINT32) (0x43 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtcmlloadsel_right_h[3:0]= 0x43
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x804C, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x806C, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x80EC, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// idtcmlloadsel_right_h[3:0]= 0x43
  ///
  { PCH_SATA_PHY_PORT_ID, 0x804C, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x806C, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80EC, (UINT32) (0xFF00FFFF), (UINT32) (0x22 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// ocfgpipolyphtrim[3:0]= 0x9
  ///
  { PCH_SATA_PHY_PORT_ID, 0x2300, (UINT32) (0xFFFFFFF0), (UINT32) (0x9 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2500, (UINT32) (0xFFFFFFF0), (UINT32) (0x9 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  ///
  /// ocfgsqcmlcurrentadj[2:0]= 0x7
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x314, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x514, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x714, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x914, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2314, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// ocfgsqcmlcurrentadj[2:0]= 0x7
  ///
  { PCH_SATA_PHY_PORT_ID, 0x2314, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2514, (UINT32) (0xFFFFFFF8), (UINT32) (0x7 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },




  ///
  /// PCS.txrcscale[7:0] = 0x95
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2254, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCS.txrcscale[7:0] = 0x95
  ///
  { PCH_SATA_PHY_PORT_ID, 0x0254, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0654, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0854, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2254, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  ///
  /// PCS.rxtermrcscale[7:0] = 0x95
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  ///
  /// PCS.rxtermrcscale[7:0] = 0x95
  ///
  { PCH_SATA_PHY_PORT_ID, 0x0254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0454, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0654, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x0854, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2454, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  ///
  /// grcnow = 1'b1
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80c0, (UINT32) (0xFFFFDFFF), (UINT32) (0x1 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80c0, (UINT32) (0xFFFFDFFF), (UINT32) (0x1 << 13), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  ///


  /// grcnow = 1'b0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x80c0, (UINT32) (0xFFFFDFFF), (UINT32) (0x0 << 13), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x80c0, (UINT32) (0xFFFFDFFF), (UINT32) (0x0 << 13), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  ///
  ///lrc_rdy_pulsegen=1’b1
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x244, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x444, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x644, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x844, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  { PCH_PCIE_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFF7FF), (UINT32) (0x1 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  ///
  ///lrc_rdy_pulsegen=1’b0
  ///
  { PCH_PCIE_PHY_PORT_ID, 0x244, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x444, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x644, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x844, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  { PCH_PCIE_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFF7FF), (UINT32) (0x0 << 11), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //sighting 4682196

  //Sighting 4682348
  ///
  /// icfgpfcfg_gen1= 0x4406
  ///LANE0
  { PCH_SATA_PHY_PORT_ID, 0x2318, (UINT32) (0x0000FFFF), (UINT32) (0x4514 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //ocfgdtleeqdata_h_gen1<6:0>=0x2
  //
  { PCH_SATA_PHY_PORT_ID, 0x2300, (UINT32) (0x80FFFFFF), (UINT32) (0x2 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //ocfgdtleeqedge_h_gen1<6:0>=0x2
  //
  { PCH_SATA_PHY_PORT_ID, 0x2304, (UINT32) (0xFF80FFFF), (UINT32) (0x2 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //icfgifcfg_gen1<7:0>=0xd
  //
  { PCH_SATA_PHY_PORT_ID, 0x231c, (UINT32) (0xFFFFFF00), (UINT32) (0xd << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },


  //
  //LANE1
  //
  { PCH_SATA_PHY_PORT_ID, 0x2518, (UINT32) (0x0000FFFF), (UINT32) (0x4714 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //ocfgdtleeqdata_h_gen1<6:0>=0x4
  //
  { PCH_SATA_PHY_PORT_ID, 0x2500, (UINT32) (0x80FFFFFF), (UINT32) (0x4 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //ocfgdtleeqedge_h_gen1<6:0>=0x4
  //
  { PCH_SATA_PHY_PORT_ID, 0x2504, (UINT32) (0xFF80FFFF), (UINT32) (0x4 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //
  //vlv.sata.mphy.ln1.rx.rxupifcfggen2_0.icfgifcfg_gen2_7_0=0xd
  //
  { PCH_SATA_PHY_PORT_ID, 0x251c, (UINT32) (0xFFFFFF00), (UINT32) (0xd << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  // sighting 4682348
#endif //PCIE_MODPHY_4682196_4682348
#if USB2_MODPHY_4376904_WORKAROUND
  ///
  /// USB Workaround for sighting #4376904
  /// USB2_COMPBG setting update for sighting #4682850
  ///
  { 0x43, 0x7F04, (UINT32) (0xFFFF0000), (UINT32) (0x4700 << 0), 0x06, 0x07 }, // s4682668 chg disconnect vref to 625mV/650mV.

  // USB per port config change requested by EV team #4753319
  // Update the 4 USB lanes' default setting to 0x49209.
  { 0x43, 0x4100, (UINT32) (0xFFF00000), (UINT32) (0x49209 << 0), 0x06, 0x07 },
  { 0x43, 0x4200, (UINT32) (0xFFF00000), (UINT32) (0x49209 << 0), 0x06, 0x07 },
  { 0x43, 0x4300, (UINT32) (0xFFF00000), (UINT32) (0x49209 << 0), 0x06, 0x07 },
  { 0x43, 0x4400, (UINT32) (0xFFF00000), (UINT32) (0x49209 << 0), 0x06, 0x07 },
  // End of #4753319

  { 0x43, 0x4500, (UINT32) (0xFFFF7FFF), (UINT32) (0x0000 << 15), 0x06, 0x07 },
  { 0x43, 0x4600, (UINT32) (0xFFFF7FFF), (UINT32) (0x0000 << 15), 0x06, 0x07 },
  { 0x43, 0x4700, (UINT32) (0xFFFF7FFF), (UINT32) (0x0000 << 15), 0x06, 0x07 },
  { 0x43, 0x4800, (UINT32) (0xFFFF7FFF), (UINT32) (0x0000 << 15), 0x06, 0x07 },
#endif
  //vlv.sata.mphy.common.pll_fast_lock.fst_plllocktimer_1_0 = 0x3
  { PCH_SATA_PHY_PORT_ID, 0x8100, (UINT32) (0xFFFFFCFF), (UINT32) (0x3 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  //vlv.sata.mphy.pll0_ext.cml1.idtcmlloadsel_left_h_3_0 = 0x08
  //vlv.sata.mphy.pll0_ext.cml1.idtcmlsthsel_left_h_3_0 = 0x05
  //vlv.sata.mphy.pll0_ext.cml2.idtcmlloadsel_right_h_3_0 = 0x08
  //vlv.sata.mphy.pll0_ext.cml2.idtcmlsthsel_right_h_3_0 = 0x05
  { PCH_SATA_PHY_PORT_ID, 0x804C, (UINT32) (0x0000FFFF), (UINT32) (0x8585 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //vlv.sata.mphy.ln0.tx.w2tapdeemph6p0.ow2tapdeemph6p0_7_0 = 0x60
  { PCH_SATA_PHY_PORT_ID, 0x2290, (UINT32) (0xFF00FFFF), (UINT32) (0x60 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //vlv.sata.mphy.ln1.tx.w2tapdeemph6p0.ow2tapdeemph6p0_7_0 = 0x60
  { PCH_SATA_PHY_PORT_ID, 0x2490, (UINT32) (0xFF00FFFF), (UINT32) (0x60 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  //vlv.sata.mphy.ln0.rx.rxupifcfggen2_0.icfgifcfg_gen2_7_0 = 0x4 -> 0x0d -> 0x02
  { PCH_SATA_PHY_PORT_ID, 0x230C, (UINT32) (0xFF00FFFF), (UINT32) (0x02 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //vlv.sata.mphy.ln1.rx.rxupifcfggen2_0.icfgifcfg_gen2_7_0  = 0xE -> 0x02
  { PCH_SATA_PHY_PORT_ID, 0x250C, (UINT32) (0xFF00FFFF), (UINT32) (0x02 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  //vlv.sata.mphy.ref.pmonskewind1.pmonnll_h_1_0 (07:06) = 0x1
  //vlv.sata.mphy.ref.pmonskewind1.pmonpll_h_1_0 (05:04) = 0x1
  { PCH_SATA_PHY_PORT_ID, 0x80D0, (UINT32) (0xFFFFFF0F), (UINT32) (0x50), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0288, (UINT32) (0xFFFF00FF), (UINT32) (0xA0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0488, (UINT32) (0xFFFF00FF), (UINT32) (0xA0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0688, (UINT32) (0xFFFF00FF), (UINT32) (0xA0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0888, (UINT32) (0xFFFF00FF), (UINT32) (0xA0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFFFF00FF), (UINT32) (0x55 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0290, (UINT32) (0xFF00FFFF), (UINT32) (0x3B << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFFFF00FF), (UINT32) (0x55 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0490, (UINT32) (0xFF00FFFF), (UINT32) (0x3B << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFFFF00FF), (UINT32) (0x55 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0690, (UINT32) (0xFF00FFFF), (UINT32) (0x3B << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFFFF00FF), (UINT32) (0x55 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0890, (UINT32) (0xFF00FFFF), (UINT32) (0x3B << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x030C, (UINT32) (0xFFFFFF00), (UINT32) (0x9C << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x030C, (UINT32) (0xFFFF00FF), (UINT32) (0x4B << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0318, (UINT32) (0xFF00FFFF), (UINT32) (0x9C << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0318, (UINT32) (0x00FFFFFF), (UINT32) (0x4B << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x050C, (UINT32) (0xFFFFFF00), (UINT32) (0x9C << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x050C, (UINT32) (0xFFFF00FF), (UINT32) (0x4B << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0518, (UINT32) (0xFF00FFFF), (UINT32) (0x9C << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0518, (UINT32) (0x00FFFFFF), (UINT32) (0x4B << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x070C, (UINT32) (0xFFFFFF00), (UINT32) (0x9C << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x070C, (UINT32) (0xFFFF00FF), (UINT32) (0x4B << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0718, (UINT32) (0xFF00FFFF), (UINT32) (0x9C << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0718, (UINT32) (0x00FFFFFF), (UINT32) (0x4B << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x090C, (UINT32) (0xFFFFFF00), (UINT32) (0x9C << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x090C, (UINT32) (0xFFFF00FF), (UINT32) (0x4B << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0918, (UINT32) (0xFF00FFFF), (UINT32) (0x9C << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0918, (UINT32) (0x00FFFFFF), (UINT32) (0x4B << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //# RCOMP sequence for PCIE
  //# Disable PLL Iref periodic update
  //{ PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFFFE), (UINT32) (0x0 << 0), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //# Enable DL termination periodic update enable
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //# Apply TX and RX scaler across all DL
  //# TX scaler=1.16x
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //# RX scaler=1.16x
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },

  //# RX Vga scaler=1.16x
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0254, (UINT32) (0x00FFFFFF), (UINT32) (0x95 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0454, (UINT32) (0x00FFFFFF), (UINT32) (0x95 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0654, (UINT32) (0x00FFFFFF), (UINT32) (0x95 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0644, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0854, (UINT32) (0x00FFFFFF), (UINT32) (0x95 << 24), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  { PCH_PCIE_PHY_PORT_ID, 0x0844, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_PCIE_PHY_MMIO_READ_OPCODE, PCH_PCIE_PHY_MMIO_WRITE_OPCODE },
  //# RCOMP sequence for SATA
  //# Disable PLL Iref periodic update
  //{ PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFFFE), (UINT32) (0x0 << 0), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  //# Enable DL termination periodic update enable
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFFF7), (UINT32) (0x1 << 3), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFFFB), (UINT32) (0x1 << 2), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFFFD), (UINT32) (0x1 << 1), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },


  //# Apply TX and RX scaler across all DL
  //# TX scaler=1.16x
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFF9FF), (UINT32) (0x1 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  //# RX scaler=1.16x
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2254, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFF9FF), (UINT32) (0x2 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2454, (UINT32) (0xFF00FFFF), (UINT32) (0x95 << 16), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },

  //# RX Vga scaler=1.16x
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2254, (UINT32) (0x00FFFFFF), (UINT32) (0x95 << 24), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2244, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFF9FF), (UINT32) (0x3 << 9), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2454, (UINT32) (0xFFFF00FF), (UINT32) (0x95 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x1 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
  { PCH_SATA_PHY_PORT_ID, 0x2444, (UINT32) (0xFFFFFEFF), (UINT32) (0x0 << 8), PCH_SATA_PHY_MMIO_READ_OPCODE, PCH_SATA_PHY_MMIO_WRITE_OPCODE },
};



///
/// Entry point
///
EFI_STATUS
EFIAPI
PchEarlyInit (
#ifdef ECP_FLAG
  IN  EFI_FFS_FILE_HEADER    *FileHandle,
  IN  EFI_PEI_SERVICES       **PeiServices
#else
  IN EFI_PEI_FILE_HANDLE       FileHandle,
  IN CONST EFI_PEI_SERVICES    **PeiServices
#endif
  )
/**

  @brief
  Installs the PCH PEI Init PPI
  Performing Pch early init after PchPlatfromPolicy PPI produced

  @param[in] FfsHeader            Not used.
  @param[in] PeiServices          General purpose services available to every PEIM.

  @retval EFI_SUCCESS             The function completes successfully
  @retval EFI_OUT_OF_RESOURCES    Insufficient resources to create database

**/
{

  UINT32                                Buffer32;
  UINT32                                MmioMtpmc_1;
  UINT16                                RetryCounter;
  UINT16                                i;
  UINT16                                TableSize;
  PCH_MSG_BUS_TABLE_STRUCT_TABLE_STRUCT *PchModPhyTable;

  DEBUG ((EFI_D_INFO, "PchEarlyInit - Start\n"));

  // Silicon Steppings
  switch (PchStepping()) {
 

    case PchB0: // B0 and later
    default:
      DEBUG ((EFI_D_ERROR, "PchEarlyInit: SOC B0 and later ModPhy Table programming\n"));
      TableSize    = (sizeof (PchMphyRequirements_B0) / sizeof (PCH_MSG_BUS_TABLE_STRUCT_TABLE_STRUCT));
      PchModPhyTable   = PchMphyRequirements_B0;
      for (i = 0; i < sizeof (PchMphyPLLConfBeforePCIEResetRel)/ sizeof (PCH_MSG_BUS_TABLE_STRUCT_TABLE_STRUCT); i++) {
        PchMsgBusAndThenOr32 (
          PchMphyPLLConfBeforePCIEResetRel[i].PortId,
          PchMphyPLLConfBeforePCIEResetRel[i].Address,
          Buffer32,
          PchMphyPLLConfBeforePCIEResetRel[i].AndMask,
          PchMphyPLLConfBeforePCIEResetRel[i].OrMask,
          PchMphyPLLConfBeforePCIEResetRel[i].ReadOpCode,
          PchMphyPLLConfBeforePCIEResetRel[i].WriteOpCode
          );
      }
      break;
  }

  // ModPhy Programming for PCIe, SATA
  // Should be programmed before PCIe Reset at early stage or PEI
  for (i = 0; i < TableSize; i++) {
    PchMsgBusAndThenOr32 (
      PchModPhyTable[i].PortId,
      PchModPhyTable[i].Address,
      Buffer32,
      PchModPhyTable[i].AndMask,
      PchModPhyTable[i].OrMask,
      PchModPhyTable[i].ReadOpCode,
      PchModPhyTable[i].WriteOpCode
      );
  }

  // Set PMC_MTPMC1 bit3 to inform PMC FW to complete PCIe reset
  MmioMtpmc_1 = (PchLpcPciCfg32 (R_PCH_LPC_PMC_BASE) & B_PCH_LPC_PMC_BASE_BAR) + R_PCH_PMC_MTPMC1;
  MmioOr32 (MmioMtpmc_1, (UINT32) BIT3);

  // Polling PMC_MTPMC1 bit3 (wait for PMC FW release PCIe reset then clear the handshake bit)
  RetryCounter = 0; // retry counter
  do {
    Buffer32 = MmioRead32(MmioMtpmc_1);
    RetryCounter++;
    DEBUG ((EFI_D_INFO, "[%d] Polling bit3 of R_PCH_PMC_MTPMC1 = %4X\n", RetryCounter, Buffer32));
  } while((Buffer32 & BIT3) && (RetryCounter<10));

  DEBUG ((EFI_D_INFO, "PchEarlyInit() - End\n"));
  return EFI_SUCCESS;
}
